<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DECAST • Benching &amp; Pre-Foam Planner (piece switch + multi-leg)</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header>
      <img alt="DECAST" src="https://decastltd.com/images/layout/logo.png">
    </header>
    <main>
      <div class="card">
        <div class="tabs" role="tablist" aria-label="Tool switcher">
          <button class="tab" role="tab" id="tabBtnBench" aria-selected="true" aria-controls="bench">Bench Mode</button>
          <button class="tab" role="tab" id="tabBtnPlanner" aria-selected="false" aria-controls="planner">Pre-Foam Planner</button>
        </div>

        <!-- Bench Mode -->
        <section id="bench" role="tabpanel" aria-labelledby="tabBtnBench">
          <h1>Bench Mode</h1>

          <div class="sub">Mode</div>
          <div class="row-pills" id="benchModeRow" style="gap: 12px">
            <button class="pill" data-mode="manual" aria-pressed="true">Manual</button>
            <button class="pill" data-mode="auto" aria-pressed="false">Auto (Piece mode)</button>
          </div>

          <div id="benchAutoBlock" hidden>
            <div class="sub">Piece size (P)</div>
            <div class="row-pills" id="benchPieceRow">
              <button class="pill" data-size="762" aria-pressed="false">762</button>
              <button class="pill" data-size="914" aria-pressed="false">914</button>
              <button class="pill" data-size="1067" aria-pressed="false">1067</button>
              <button class="pill" data-size="1219" aria-pressed="false">1219</button>
              <button class="pill" data-size="1367" aria-pressed="false">1367</button>
              <button class="pill" data-size="1524" aria-pressed="false">1524</button>
            </div>

            <div class="grid2">
              <div class="input">
                <label for="b_hfb">Hole height from bottom (H_fb)</label>
                <input id="b_hfb" inputmode="numeric" placeholder="e.g., 300">
                <span class="unit">mm</span>
                <div class="hint" id="b_hint_auto">Computed automatically: S_req = P − H_fb</div>
              </div>
              <div class="input">
                <label for="b_sreq_auto">Computed required spigot height (S_req = P − H_fb)</label>
                <input id="b_sreq_auto" placeholder="auto from P − H_fb" readonly>
              </div>
            </div>
          </div>

          <div id="benchManualBlock">
            <div class="grid2">
              <div class="input">
                <label for="b_sreq_manual">Required spigot height (S_req)</label>
                <input id="b_sreq_manual" inputmode="numeric" placeholder="e.g., 462">
                <span class="unit">mm</span>
                <div class="hint" id="b_hint_manual">Enter required spigot height directly.</div>
              </div>
              <div></div>
            </div>
          </div>

          <div class="grid2">
            <div class="input">
              <label for="b_scur">Current spigot height (S_cur)</label>
              <input id="b_scur" inputmode="numeric" placeholder="e.g., 500">
              <span class="unit">mm</span>
            </div>
            <div class="input">
              <label for="b_lcur">Current leg height (L_cur)</label>
              <input id="b_lcur" inputmode="numeric" placeholder="e.g., 1250">
              <span class="unit">mm</span>
            </div>
          </div>

          <div class="actions">
            <button class="btn primary" id="b_calc" disabled>Calculate</button>
            <button class="btn secondary" id="b_reset">Reset</button>
          </div>

          <div class="equation" id="b_eq" hidden>ΔS = S_cur − S_req • L_new = L_cur + ΔS</div>
          <div class="result" id="b_result" hidden>New Leg Height: —</div>
          <div id="b_legBand"></div>
        </section>

        <!-- Pre-Foam Planner -->
        <section id="planner" role="tabpanel" aria-labelledby="tabBtnPlanner" hidden>
          <h1>Pre-Foam Planner</h1>

          <div class="sub">Core type</div>
          <div class="row-pills" id="coreRow">
            <button class="pill" data-core="1595" aria-pressed="true">Regular (1595)</button>
            <button class="pill" data-core="1245" aria-pressed="false">Short (1245)</button>
          </div>

          <div class="sub">Piece size (P)</div>
          <div class="row-pills" id="pieceRow">
            <button class="pill" data-size="762" aria-pressed="false">762</button>
            <button class="pill" data-size="914" aria-pressed="true">914</button>
            <button class="pill" data-size="1067" aria-pressed="false">1067</button>
            <button class="pill" data-size="1219" aria-pressed="false">1219</button>
            <button class="pill" data-size="1367" aria-pressed="false">1367</button>
            <button class="pill" data-size="1524" aria-pressed="false">1524</button>
          </div>

          <div class="sub">Boot Size (D)</div>
          <div class="row-pills" id="bootRow">
            <button class="pill" data-boot="150" aria-pressed="false">150</button>
            <button class="pill" data-boot="200" aria-pressed="true">200</button>
            <button class="pill" data-boot="250" aria-pressed="false">250</button>
            <button class="pill" data-boot="300" aria-pressed="false">300</button>
            <button class="pill" data-boot="350" aria-pressed="false">350</button>
          </div>
          <div class="hint">Center offset used in math: <strong><span id="centerEcho">100</span> mm</strong> (D/2)</div>

          <div class="grid2">
            <div class="input">
              <label for="hfb">Hole height from bottom (H_fb)</label>
              <input id="hfb" inputmode="numeric" placeholder="e.g., 300">
              <span class="unit">mm</span>
            </div>
            <div class="input">
              <label for="tfoam">Foam thickness (t_foam)</label>
              <input id="tfoam" inputmode="numeric" placeholder="e.g., 500">
              <span class="unit">mm</span>
            </div>
          </div>

          <div class="actions">
            <button class="btn primary" id="plan" disabled>Plan</button>
            <button class="btn secondary" id="reset">Reset</button>
          </div>

          <div class="equation" id="eq" hidden>
            L = (H_core − T_spig) − (P − H_fb) + (t_foam − D/2)
          </div>
          <div class="result" id="result" aria-live="polite" hidden>Set legs to: —</div>
          <div id="legBand"></div>
        </section>
      </div>
      <footer>Independent of DECAST</footer>
    </main>
    <script src="script.js"></script>
  </body>
</html>
